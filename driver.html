<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TOWING</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  background:#020617;
  color:white;
  font-family:Arial;
  padding:20px;
}
input,button {
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:16px;
}
button {
  background:#38bdf8;
  border:none;
}
</style>
</head>
<body>

<h2>ðŸš— WELCOME</h2>

<input id="name" placeholder="NAME" />
<button onclick="start()">ENTER</button>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAQy51BTmMziVId21F3a4DRebFd7Ni_Jcs",
  authDomain: "phone-tracker-f5a92.firebaseapp.com",
  databaseURL: "https://phone-tracker-f5a92-default-rtdb.firebaseio.com",
  projectId: "phone-tracker-f5a92",
  storageBucket: "phone-tracker-f5a92.firebasestorage.app",
  messagingSenderId: "778164059316",
  appId: "1:778164059316:web:ad01f560d82a58491e2be1",
  measurementId: "G-9N8F2JEWD0"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let driverId = localStorage.getItem("driverId");
if (!driverId) {
  driverId = crypto.randomUUID();
  localStorage.setItem("driverId", driverId);
}

function start() {
  const name = document.getElementById("name").value;

  navigator.geolocation.watchPosition(pos => {
    db.ref("drivers/" + driverId).set({
      name: name,
      lat: pos.coords.latitude,
      lon: pos.coords.longitude,
      speed: pos.coords.speed || 0,
      heading: pos.coords.heading || 0,
      time: Date.now()
    });
  }, err => alert(err.message), {
    enableHighAccuracy: true
  });
}
</script>

</body>

</html>

